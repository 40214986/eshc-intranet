{% load staticfiles %}
{% load waliki_tags %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 


    <meta charset="utf-8">
    {% block viewport %}
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% endblock %}
    <title>{% block head_title_base %}{% if page and page.title %} {{ page.title }} | {% endif %}{{ SITE_NAME|default:'ESHC Wiki' }}{% endblock %}</title>

     {% block style_base %}
        <!-- <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}"> -->
        <link rel="stylesheet" type="text/css" href="{% static 'css/pygments.css'%}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/noembed.css'%}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/waliki.css'%}">
        {% block extra_style %}{% endblock %}
    {% endblock %}

    {% block html5shim %}
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
    {% endblock %}

    {% block extra_head_base %}
        {% block extra_head %}{% endblock %}
    {% endblock %}

</head>

    <body>
        {% block navbar %}
        {% load i18n %}
        <div class="navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
					<a class="navbar-brand" href="{% url 'home:index' %}">ESHC</a>
				</div>
                <ul class="nav navbar-nav waliki-nav">
                    <li><a href="/wiki/">Wiki Home</a></li>
                    <li><a id="btn-waliki_new" href="{% url 'waliki_new' %}">{% trans "New page" %}</a></li>
                    {% for url_name, link_text in navbar_links  %}
                    <li><a href="{% url url_name %}">{{ link_text }}</a></li>
                    {% endfor %}
                    <li class="divider-vertical"></li>
                    <li></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    {% if request.user.is_authenticated %}
                        <li><a href="{% url 'users:profile' %}"><span class="glyphicon glyphicon-user"></span> Profile</a></li>
                        <li><a href="{% url 'users:logout' %}"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                    {% else %}
                        <li><a href="{% url 'users:register' %}"><span class="glyphicon glyphicon-user"></span> Register</a></li>
                        <li><a href="{% url 'users:login' %}"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                    {% endif %}
                </ul>
				<!-- {% navbar_links %} -->
            </div>
        </div>
        {% endblock %}
        <div class="container">
        {% block messages %}
            <div class="row">
                <div class="col-lg-offset-2 col-sm-8 col-md-8">
                    {% include "_messages.html" %}
                </div>
            </div>
        {% endblock messages %}

          {% block body %}
            <div class="row">
                <div class="col-lg-offset-1 col-sm-10 col-md-10">
                    {% if page  %}
                    <div class="page-header">
                    {% block header %}
                       <h1>{% block title %}{{ page.title }}{% endblock title %}</h1>
                    {% endblock header %}
                    </div>
                    {% endif %}

               {% block content %}
               {% endblock content %}

                {% block extra_content %}{% endblock extra_content %}
                </div>
            </div>
          {% endblock body %}
        </div>


        <footer>
            {% block footer %}{% endblock %}
        </footer>

        {% block script_base %}
        <script type="text/javascript" src="{% static "js/jquery.min.js" %}"></script>
        <script type="text/javascript">
            function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
                return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
            }
            $.ajaxSetup({
                beforeSend: function(xhr, settings) {
                    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                        xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token }}');
                    }
                }
            });

        </script>
        <script src="{% static 'js/bootstrap.min.js'%}"></script>
        <script src="{% static 'js/waliki_base.js'%}"></script>

        {% block extra_script %}{% endblock %}
        {% endblock %}

        {% block extra_body_base %}
            {% block extra_body %}{% endblock %}
        {% endblock %}
    <div class="navbar navbar-fixed-bottom">
    <div class="container">
        <ul class="nav navbar-nav">
            <li><a href="https://www.facebook.com/EdinburghCoops/">Facebook</a></li>
            <li><a href="https://edinburghcoop.wordpress.com/">Wordpress</a></li>
            <li><a href="https://twitter.com/EdinburghCoop">Twitter</a></li>
        </ul>
    </div>

</body>
</html>
